<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Orbit: Mission Control</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --text: #e2e8f0;
            --accent: #38bdf8;
            --success: #22c55e;
            --error: #ef4444;
            --code-bg: #334155;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            line-height: 1.6;
        }

        h1,
        h2,
        h3 {
            color: var(--accent);
            margin-top: 0;
        }

        .hero {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 12px;
            border: 1px solid #334155;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .status-summary {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: inline-block;
            border: 1px solid #475569;
        }

        .status-summary strong {
            color: var(--accent);
            font-size: 1.2em;
        }

        .phase-card {
            background-color: var(--card);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            border: 1px solid #334155;
            position: relative;
        }

        .phase-content {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #334155;
        }

        .task-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 10px;
        }

        .task-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 12px;
            background: #0f172a;
            border-radius: 8px;
        }

        .task-item:last-child {
            margin-bottom: 0;
        }

        .status-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .status-pending {
            background: #334155;
            color: #94a3b8;
        }

        .status-pass {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-fail {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error);
            border: 1px solid var(--error);
        }

        .verify-btn {
            background: var(--accent);
            color: #0f172a;
            border: none;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 10px;
            width: 100%;
        }

        .verify-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .verify-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        pre {
            background: var(--code-bg);
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            border: 1px solid #475569;
        }

        code {
            font-family: monospace;
            color: #fca5a5;
        }

        details {
            background: #0f172a;
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            cursor: pointer;
        }

        summary {
            font-weight: bold;
            color: var(--accent);
        }

        .prompt-hint {
            background: linear-gradient(90deg, rgba(56, 189, 248, 0.1) 0%, rgba(56, 189, 248, 0) 100%);
            border-left: 3px solid var(--accent);
            padding: 10px 15px;
            margin: 10px 0;
            font-size: 0.9em;
            color: #bae6fd;
            border-radius: 0 4px 4px 0;
        }

        .resources {
            margin-top: 10px;
            font-size: 0.85em;
        }

        .resource-link {
            color: #94a3b8;
            margin-right: 15px;
            text-decoration: none;
            border-bottom: 1px dotted #94a3b8;
            transition: color 0.2s;
        }

        .resource-link:hover {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .concept {
            background: rgba(255, 255, 255, 0.05);
            border-left: 3px solid #94a3b8;
            padding: 10px 15px;
            margin: 10px 0;
            font-size: 0.9em;
            color: #cbd5e1;
            border-radius: 0 4px 4px 0;
        }

        .concept strong {
            color: #f8fafc;
        }

        .phase-content h3 {
            margin-top: 40px;
            margin-bottom: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 30px;
        }

        .phase-content h3:first-of-type {
            margin-top: 0;
            border-top: none;
            padding-top: 0;
        }

        /* Tabs */
        .tab-container {
            margin-top: 20px;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .tab-header {
            display: flex;
            background: #0f172a;
            border-bottom: 1px solid #334155;
        }

        .tab-btn {
            flex: 1;
            /* Make tabs fill the width 50/50 */
            padding: 12px 20px;
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.2s;
            border-right: 1px solid #334155;
            text-align: center;
        }

        .tab-btn:last-child {
            border-right: none;
        }

        .tab-btn:hover {
            color: var(--text);
            background: rgba(255, 255, 255, 0.05);
        }

        .tab-btn.active {
            color: var(--accent);
            background: #1e293b;
            border-bottom: 2px solid var(--accent);
        }

        .tab-content {
            padding: 25px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Context Bridge (State Summary) */
        .step-bridge {
            margin-top: 25px;
            padding: 16px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid #334155;
            border-left: 4px solid var(--accent);
            border-radius: 6px;
            color: #cbd5e1;
            font-size: 0.9em;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .step-bridge strong {
            color: #fff;
            margin-right: 6px;
        }

        /* Prompt Header and Copy Button */
        .prompt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .copy-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.75em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: var(--accent);
            color: #000;
        }

        /* Adjust pre inside prompt hint to have no extra margin since header handles it */
        .prompt-hint pre {
            margin-top: 0;
            border: 1px solid rgba(56, 189, 248, 0.3);
        }
    </style>
</head>

<body>

    <div class="hero">
        <h1>üöÄ Project Orbit: Mission Control</h1>
        <p><strong>The Objective:</strong> Master Structured Agentic Engineering.</p>
        <p>You are about to build <em>Orbit</em>, an AI Task Orchestration Platform. <br>
            The true goal is to experience a <strong>Structured AI Workflow</strong>: defining Roles, writing PRDs, and
            using Verification Loops to build complex software systematically.</p>
        <p style="color: #94a3b8; font-size: 0.9em;">‚è±Ô∏è <strong>Estimated Total Time:</strong> ~2 Hours</p>

        <div class="status-summary">
            Current Status: <strong id="globalStatus">Initializing...</strong>
        </div>
    </div>

    <!-- Architecture -->
    <div class="phase-card">
        <h2>üèóÔ∏è System Architecture</h2>
        <p><strong>What is Orbit?</strong> It is a "System Control" app where users submit tasks (Research, Analysis)
            which are queued and processed asynchronously by worker agents.</p>
        <p>Before you build, visualize. This is what you will create:</p>
        <div class="mermaid">
            graph TD
            subgraph "Frontend"
            Dashboard[React Dashboard]
            WS_Client[WebSocket Client]
            end

            subgraph "Backend"
            API[Express API]
            Worker[Worker Process]
            end

            Dashboard -->|POST /tasks| API
            API -->|Queue| Redis[(Redis)]
            Worker -->|Process| Redis
            Redis -->|Updates| API
            API -->|WS Push| WS_Client
        </div>
    </div>

    <!-- Phase 1 -->
    <div class="phase-card">
        <h2>Phase 1: The Architect (Planning) <span style="font-size:0.6em; opacity:0.7; font-weight:normal">‚è±Ô∏è
                15m</span></h2>
        <p><strong>Objective</strong>: Define the system before writing code. This teaches you how Antigravity uses
            context files.</p>
        <div class="resources">
            üìö Learn More:
            <a href="https://www.atlassian.com/agile/product-management/product-requirements" target="_blank"
                class="resource-link">What is a PRD?</a>
            <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" class="resource-link">Markdown
                Syntax</a>
        </div>

        <div class="phase-content">
            <h3>Step 1: Initialize</h3>
            <div class="concept"><strong>Concept: Version Control.</strong> Git provides a safety net. For Agents, it
                allows you to "undo" a hallucination instantly. Always commit before asking an Agent to do complex work.
            </div>
            <p>Ensure you are in the workspace root. Run <code>git init</code> if you haven't already.</p>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Initialized verified git repository.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> The safety net is active, but the workspace is
                    undefined.</span>
                <span>üöÄ <strong>Next Objective:</strong> Define the Product Requirements (PRD).</span>
            </div>

            <h3>Step 2: Define Product (PRD)</h3>
            <div class="concept"><strong>Concept: Context is King.</strong> Agents don't guess; they read. A PRD
                (Product Requirements Document) is the single source of truth that aligns the Agent's output with your
                intent.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p1s2-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p1s2-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p1s2-manual" class="tab-content active">
                    <p>Create a file <code>PRD.md</code> in the root.</p>
                    <details open>
                        <summary>üìÑ <strong>Click to Copy PRD Content</strong></summary>
                        <pre style="user-select: all;"># Product Requirements Document: Orbit
## Overview
Orbit is a dashboard for visualizing long-running background tasks.
## Features
- **Task Submission**: POST /api/tasks (Type: Research, Analysis)
- **Worker Queue**: Redis-backed queue for asynchronous processing.
- **Real-time Status**: WebSocket updates for task progress.</pre>
                    </details>
                </div>

                <div id="p1s2-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Create `PRD.md` with the following content:

```markdown
# Product Requirements Document: Orbit
## Overview
Orbit is a dashboard for visualizing long-running background tasks.
## Features
- **Task Submission**: POST /api/tasks (Type: Research, Analysis)
- **Worker Queue**: Redis-backed queue for asynchronous processing.
- **Real-time Status**: WebSocket updates for task progress.
```

Commit with message 'docs: add initial PRD'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Defined the Product "Blueprint" (PRD).</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> We know *what* to build, but the AI doesn't know *who* it
                    is.</span>
                <span>üöÄ <strong>Next Objective:</strong> Define specific Agent Personas (Roles).</span>
            </div>

            <h3>Step 3: Define Roles</h3>
            <div class="concept"><strong>Concept: The Persona Pattern.</strong> Assigning a specific role (e.g., 'Senior
                Architect') primes the LLM to access specific knowledge domains and adopt a professional tone.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p1s3-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p1s3-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p1s3-manual" class="tab-content active">
                    <p>Create a directory <code>.agent/active_context</code> and a file inside it named
                        <code>roles.md</code>:
                    </p>
                    <pre># Roles
- **Architect**: Responsible for system design and PRDs.
- **Frontend Specialist**: Focus on React, Tailwind, and UX.
- **Backend Engineer**: Focus on Node.js, Redis, and APIs.</pre>
                </div>

                <div id="p1s3-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Create a directory `.agent/active_context` and a file inside it named `roles.md` with the following content:

```markdown
# Roles
- **Architect**: Responsible for system design and PRDs.
- **Frontend Specialist**: Focus on React, Tailwind, and UX.
- **Backend Engineer**: Focus on Node.js, Redis, and APIs.
```

Commit with message 'docs: define agent roles'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Established distinct Agent Roles.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> The "Team" is ready in concept, but there is no
                    codebase.</span>
                <span>üöÄ <strong>Next Objective:</strong> Lay the Server Infrastructure.</span>
            </div>
        </div>

        <h3>Verification Checklist</h3>
        <ul class="task-list" id="phase1-list"></ul>
        <button class="verify-btn" onclick="verifyAll(this)">üì° Verify Phase 1</button>
    </div>

    <!-- Phase 2 -->
    <div class="phase-card">
        <h2>Phase 2: The Engineer (Backend Setup) <span style="font-size:0.6em; opacity:0.7; font-weight:normal">‚è±Ô∏è
                45m</span></h2>
        <p><strong>Objective</strong>: Build a robust backend with a worker queue.</p>
        <div class="resources">
            üìö Learn More:
            <a href="https://expressjs.com/" target="_blank" class="resource-link">Express</a>
            <a href="https://docs.bullmq.io/" target="_blank" class="resource-link">BullMQ Guide</a>
            <a href="https://redis.io/docs/about/" target="_blank" class="resource-link">Redis Crash Course</a>
        </div>

        <div class="phase-content">
            <h3>Step 1: Scaffold Server</h3>
            <div class="concept"><strong>Concept: Setting the Foundation.</strong> We establish the environment
                (Node/Express) explicitly so the Agent knows the strict constraints it must operate within.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p2s1-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p2s1-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p2s1-manual" class="tab-content active">
                    <p>Create a <code>server</code> folder. Inside it, run <code>npm init -y</code> and install
                        dependencies:</p>
                    <pre>npm install express redis bullmq cors ws</pre>
                    <p><em>Optimization (M1/8GB)</em>: Use native Redis (<code>brew install redis</code>) instead of
                        Docker.</p>
                </div>

                <div id="p2s1-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <div>
                                <span
                                    style="background:#f59e0b; color:#000; padding:2px 6px; border-radius:4px; font-size:0.8em; margin-right:5px; font-weight:bold;">‚è≥
                                    Long Task</span>
                                <strong>ü§ñ Agent Prompt:</strong>
                            </div>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Create a `server` directory. Initialize Node.js (npm init -y) and install the following dependencies:
- express
- bullmq
- cors
- ws
- redis

Commit with message 'chore: init server'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Installed Core Backend Dependencies.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> We have libraries (Express/BullMQ), but no running
                    application.</span>
                <span>üöÄ <strong>Next Objective:</strong> Build the REST API Endpoint.</span>
            </div>

            <h3>Step 2: Create API</h3>
            <div class="concept"><strong>Concept: Interface First Design.</strong> Defining the API contract (POST
                /tasks) <em>before</em> writing logic locks in how the system components communicate, reducing
                integration bugs.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p2s2-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p2s2-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p2s2-manual" class="tab-content active">
                    <p>Create <code>server/index.js</code>. Build an Express app with a POST <code>/tasks</code>
                        endpoint that adds jobs to a BullMQ queue named <code>orbit-tasks</code>.</p>
                    <details>
                        <summary>üìÑ <strong>Click to Copy Solution Code</strong></summary>
                        <pre style="user-select: all;">const express = require('express');
const cors = require('cors');
const { Queue } = require('bullmq');

const app = express();
app.use(cors());
app.use(express.json());

// Connect to Redis (defaults to localhost:6379)
const taskQueue = new Queue('orbit-tasks', {
    connection: { host: '127.0.0.1', port: 6379 }
});

app.post('/tasks', async (req, res) => {
    const { type, payload } = req.body;
    await taskQueue.add(type || 'GENERIC', payload || {});
    res.json({ success: true, message: 'Task Queued' });
});

app.listen(3000, () => console.log('API running on port 3000'));</pre>
                    </details>
                </div>

                <div id="p2s2-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Act as Backend Engineer. Read the `PRD.md` file.

Create `server/index.js` with Step 1:
- Setup Express app with CORS and JSON parsing.
- Initialize a BullMQ Queue named 'orbit-tasks' connecting to local Redis.
- Create a POST /tasks endpoint that accepts { type, payload } and adds it to the queue.

Commit with message 'feat: add task api'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Built the Task Ingestion API.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> We can *accept* tasks into the Queue, but nobody is
                    *processing* them.</span>
                <span>üöÄ <strong>Next Objective:</strong> Hire a Background Worker.</span>
            </div>

            <h3>Step 3: Create Worker</h3>
            <div class="concept"><strong>Concept: Asynchronous Processing.</strong> We decouple "accepting work" (API)
                from "doing work" (Worker) to keep the app responsive under load. This is a key distributed system
                pattern.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p2s3-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p2s3-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p2s3-manual" class="tab-content active">
                    <p>Create <code>server/worker.js</code>. Process jobs from <code>orbit-tasks</code>. Simulate work
                        by sleeping for 5 seconds.</p>
                    <details>
                        <summary>üìÑ <strong>Click to Copy Solution Code</strong></summary>
                        <pre style="user-select: all;">const { Worker } = require('bullmq');

console.log("Worker started...");

const worker = new Worker('orbit-tasks', async job => {
    console.log(`Processing Job ${job.id} (${job.name})...`);
    
    // Simulate 5 seconds of work
    await new Promise(resolve => setTimeout(resolve, 5000));
    
    console.log(`Job ${job.id} COMPLETED.`);
}, {
    connection: { host: '127.0.0.1', port: 6379 }
});</pre>
                    </details>
                </div>

                <div id="p2s3-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Create `server/worker.js` that:
1. Connects to 'orbit-tasks' BullMQ queue.
2. Processes jobs by logging "Processing..." and running a setTimeout for 5 seconds (simulated work).
3. Logs "Job Completed" when done.

Commit with message 'feat: add worker'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Activated the Background Worker.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> The backend loop is fully functional, but invisible to the
                    user.</span>
                <span>üöÄ <strong>Next Objective:</strong> Build the Dashboard (Frontend).</span>
            </div>
        </div>

        <h3>Verification Checklist</h3>
        <ul class="task-list" id="phase2-list"></ul>
        <button class="verify-btn" onclick="verifyAll(this)">üì° Verify Phase 2</button>
    </div>

    <!-- Phase 3 -->
    <div class="phase-card">
        <h2>Phase 3: The Frontend Specialist (Dashboard) <span
                style="font-size:0.6em; opacity:0.7; font-weight:normal">‚è±Ô∏è 30m</span></h2>
        <p><strong>Objective</strong>: Visualize the state.</p>
        <div class="resources">
            üìö Learn More:
            <a href="https://vitejs.dev/guide/" target="_blank" class="resource-link">Vite</a>
            <a href="https://react.dev/learn" target="_blank" class="resource-link">React Quick Start</a>
        </div>

        <div class="phase-content">
            <h3>Step 1: Scaffold Client</h3>
            <div class="concept"><strong>Concept: Separation of Concerns.</strong> We keep the Client logic completely
                separate from the Server. Vite handles the complex bundling, allowing the Agent to focus purely on React
                components.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p3s1-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p3s1-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p3s1-manual" class="tab-content active">
                    <p>In the root, create a Vite app:</p>
                    <pre>npm create vite@latest client -- --template react
cd client && npm install</pre>
                </div>

                <div id="p3s1-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <div>
                                <span
                                    style="background:#f59e0b; color:#000; padding:2px 6px; border-radius:4px; font-size:0.8em; margin-right:5px; font-weight:bold;">‚è≥
                                    Long Task</span>
                                <strong>ü§ñ Agent Prompt:</strong>
                            </div>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Create a Vite React app named `client` in the root directory.
Install the dependencies by running `npm install`.

Commit with message 'chore: init frontend'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Scaffolded the Vite Client.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> We have a UI framework, but it's disconnected from the
                    Engine.</span>
                <span>üöÄ <strong>Next Objective:</strong> Connect the Frontend to the Backend API.</span>
            </div>

            <h3>Step 2: Connect to API</h3>
            <div class="concept"><strong>Concept: Full Stack Integration.</strong> Connecting the Frontend UI triggers
                to the Backend logic creates the feedback loop that proves the system is actually working as a whole.
            </div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p3s2-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p3s2-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p3s2-manual" class="tab-content active">
                    <p>Create a "Start Mission" button (calls POST <code>http://localhost:3000/tasks</code>) and list
                        active tasks.</p>
                </div>

                <div id="p3s2-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Act as Frontend Specialist.
In `client/src/App.jsx`, implement a Dashboard that:
1. Has a "Start Mission" button that sends a POST request to `http://localhost:3000/tasks`.
2. Displays the list of returned tasks (mocked or real).

Commit with message 'feat: dashboard UI'.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Full-Stack Integration Complete.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> The system works, but lacks production hardiness.</span>
                <span>üöÄ <strong>Next Objective:</strong> Security & Quality Assurance.</span>
            </div>
        </div>

        <h3>Verification Checklist</h3>
        <ul class="task-list" id="phase3-list"></ul>
        <button class="verify-btn" onclick="verifyAll(this)">üì° Verify Phase 3</button>
    </div>

    <!-- Phase 4 -->
    <div class="phase-card">
        <h2>Phase 4: The Verifier (Quality) <span style="font-size:0.6em; opacity:0.7; font-weight:normal">‚è±Ô∏è 15m</span>
        </h2>
        <p><strong>Objective</strong>: Audit and Document.</p>
        <div class="resources">
            üìö Learn More:
            <a href="https://docs.npmjs.com/cli/v8/commands/npm-audit" target="_blank" class="resource-link">npm
                audit</a>
            <a href="https://keepachangelog.com/en/1.0.0/" target="_blank" class="resource-link">Keep a Changelog</a>
        </div>

        <div class="phase-content">
            <h3>Step 1: Security Audit</h3>
            <div class="concept"><strong>Concept: Automated Vigilance.</strong> Agents can write insecure code. Using
                tools like <code>npm audit</code> ensures we catch known vulnerabilities before deploying.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p4s1-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p4s1-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p4s1-manual" class="tab-content active">
                    <p>Run <code>npm audit</code> in `server/`. Create <code>SECURITY.md</code> noting any findings.</p>
                </div>

                <div id="p4s1-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Run `npm audit` in the `server` directory.
If any critical vulnerabilities are found, document them in a new file named `SECURITY.md`.
If none are found, create `SECURITY.md` stating "No critical vulnerabilities found".</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Verified Security Standards.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> Code is safe, but changes are untracked.</span>
                <span>üöÄ <strong>Next Objective:</strong> Automate the Changelog.</span>
            </div>

            <h3>Step 2: Changelog</h3>
            <div class="concept"><strong>Concept: Documentation as Code.</strong> Keeping a history helps both humans
                and Agents understand how the project has evolved over time.</div>

            <div class="tab-container">
                <div class="tab-header">
                    <button class="tab-btn active" onclick="switchTab(this, 'p4s2-manual')">My Hand (Manual)</button>
                    <button class="tab-btn" onclick="switchTab(this, 'p4s2-agent')">AI Agent (Automated)</button>
                </div>

                <div id="p4s2-manual" class="tab-content active">
                    <p>Create <code>CHANGELOG.md</code> and add an entry for "v0.1.0 - Initial Release".</p>
                </div>

                <div id="p4s2-agent" class="tab-content">
                    <div class="prompt-hint">
                        <div class="prompt-header">
                            <strong>ü§ñ Agent Prompt:</strong>
                            <button class="copy-btn"
                                onclick="copyToClipboard(this.closest('.prompt-hint').querySelector('pre').innerText, this)">Copy
                                Prompt</button>
                        </div>
                        <pre>Create a `CHANGELOG.md` file in the root.
Add an initial entry for "v0.1.0 - Initial Release" utilizing the dates and changes from the git history.</pre>
                    </div>
                </div>
            </div>
            <div class="step-bridge">
                <span>‚úÖ <strong>Accomplished:</strong> Documented Version History.</span>
                <span>‚ö†Ô∏è <strong>Current State:</strong> Project Orbit is Feature Complete.</span>
                <span>üöÄ <strong>Next Objective:</strong> You are cleared for launch.</span>
            </div>
        </div>

        <h3>Verification Checklist</h3>
        <ul class="task-list" id="phase4-list"></ul>
        <button class="verify-btn" onclick="verifyAll(this)">üì° Verify Phase 4</button>
    </div>

    <script>
        async function verifyAll(btnElement = null) {
            try {
                let originalText = "";
                if (btnElement) {
                    originalText = btnElement.innerHTML;
                    btnElement.innerHTML = "Scanning...";
                    btnElement.disabled = true;
                }

                const res = await fetch('/api/verify');
                const data = await res.json();

                // Update specific phases logic
                const p1 = renderPhase('phase1', data.phase1);
                const p2 = renderPhase('phase2', data.phase2);
                const p3 = renderPhase('phase3', data.phase3);
                const p4 = renderPhase('phase4', data.phase4);

                // Update Global Status
                const total = 4;
                const completed = [p1, p2, p3, p4].filter(Boolean).length;
                document.getElementById('globalStatus').innerText = `${completed}/${total} Phases Completed`;
                document.getElementById('globalStatus').style.color = completed === total ? 'var(--success)' : 'var(--accent)';

                if (btnElement) {
                    btnElement.innerHTML = originalText;
                    // Flash success or done
                    if ((btnElement.innerText.includes('1') && p1) ||
                        (btnElement.innerText.includes('2') && p2) ||
                        (btnElement.innerText.includes('3') && p3) ||
                        (btnElement.innerText.includes('4') && p4)) {
                        btnElement.innerText = "‚úÖ Verified";
                        setTimeout(() => btnElement.innerHTML = originalText, 2000);
                    }
                    btnElement.disabled = false;
                }
            } catch (e) {
                console.error(e);
                if (btnElement) {
                    btnElement.disabled = false;
                    btnElement.innerHTML = "‚ùå Connection Failed";
                }
            }
        }

        function renderPhase(id, items) {
            const container = document.getElementById(`${id}-list`);
            container.innerHTML = '';

            let allPassed = true;

            items.forEach(item => {
                const li = document.createElement('li');
                li.className = 'task-item';

                const icon = document.createElement('div');
                icon.className = `status-icon ${item.passed ? 'status-pass' : 'status-fail'}`;
                icon.innerHTML = item.passed ? '‚úì' : '‚úó';

                const text = document.createElement('span');
                text.innerText = item.label;

                li.appendChild(icon);
                li.appendChild(text);
                container.appendChild(li);

                if (!item.passed) allPassed = false;
            });
            return allPassed;
        }

        window.onload = () => verifyAll();

        function switchTab(btn, tabId) {
            // Find parent container
            const container = btn.closest('.tab-container');

            // Toggle buttons
            container.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            // Toggle content
            container.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            container.querySelector(`#${tabId}`).classList.add('active');
        }

        async function copyToClipboard(text, btn) {
            try {
                await navigator.clipboard.writeText(text);
                const original = btn.innerText;
                btn.innerText = "Copied!";
                setTimeout(() => btn.innerText = original, 2000);
            } catch (err) {
                console.error('Failed to copy', err);
            }
        }
    </script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    </script>
</body>

</html>